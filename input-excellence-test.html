<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Input Excellence Test - PrinceTS</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: #1a1a1a;
            color: #fff;
            font-family: 'Courier New', monospace;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: #333;
            border-radius: 10px;
        }
        
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            background: #2a2a2a;
            border-radius: 10px;
            border-left: 4px solid #4CAF50;
        }
        
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .test-card {
            background: #333;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #555;
        }
        
        .test-card h3 {
            margin-top: 0;
            color: #4CAF50;
        }
        
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            font-weight: bold;
        }
        
        .status.success { background: #2E7D32; }
        .status.warning { background: #F57C00; }
        .status.error { background: #D32F2F; }
        .status.info { background: #1976D2; }
        
        .input-display {
            background: #1a1a1a;
            padding: 10px;
            border-radius: 5px;
            font-family: monospace;
            margin: 10px 0;
            min-height: 100px;
        }
        
        .binding-btn {
            background: #555;
            color: #fff;
            border: 1px solid #777;
            padding: 8px 12px;
            margin: 5px;
            border-radius: 4px;
            cursor: pointer;
            font-family: monospace;
        }
        
        .binding-btn:hover {
            background: #666;
        }
        
        .binding-btn.rebinding {
            background: #FF9800;
            animation: pulse 1s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }
        
        .preset-select {
            background: #333;
            color: #fff;
            border: 1px solid #555;
            padding: 8px;
            border-radius: 4px;
            margin: 10px 0;
        }
        
        .slider-container {
            margin: 15px 0;
        }
        
        .slider-container label {
            display: block;
            margin-bottom: 5px;
        }
        
        .slider-container input[type="range"] {
            width: 100%;
            margin: 5px 0;
        }
        
        .slider-value {
            font-weight: bold;
            color: #4CAF50;
        }
        
        .gamepad-visual {
            background: #1a1a1a;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            margin: 15px 0;
        }
        
        .gamepad-button {
            display: inline-block;
            width: 40px;
            height: 40px;
            background: #555;
            border: 2px solid #777;
            border-radius: 50%;
            margin: 5px;
            line-height: 36px;
            font-size: 12px;
            font-weight: bold;
        }
        
        .gamepad-button.active {
            background: #4CAF50;
            border-color: #66BB6A;
        }
        
        .instructions {
            background: #1a1a1a;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
            border-left: 4px solid #2196F3;
        }
        
        .instructions h4 {
            margin-top: 0;
            color: #2196F3;
        }
        
        .instructions ul {
            margin: 10px 0;
            padding-left: 20px;
        }
        
        .instructions li {
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéÆ Input Excellence Test</h1>
            <p>Comprehensive testing of PrinceTS input system with rebinding, gamepad support, and accessibility features</p>
        </div>

        <div class="test-section">
            <h2>üìã Test Overview</h2>
            <div class="status info">
                This test demonstrates the complete input excellence system including:
                <ul>
                    <li>Action-based input mapping with conflict detection</li>
                    <li>Real-time keyboard and gamepad rebinding</li>
                    <li>Preset configurations (Classic and WASD)</li>
                    <li>Accessibility features (Late Jump Buffer, Sticky Grab)</li>
                    <li>Gamepad support with radial deadzone and D-pad mapping</li>
                </ul>
            </div>
        </div>

        <div class="test-section">
            <h2>‚å®Ô∏è Keyboard Input Testing</h2>
            <div class="test-grid">
                <div class="test-card">
                    <h3>Current Bindings</h3>
                    <div id="keyboardBindings">
                        <div class="binding-row">
                            <span>Move Left:</span>
                            <button class="binding-btn" data-action="Left" data-device="keyboard">A</button>
                        </div>
                        <div class="binding-row">
                            <span>Move Right:</span>
                            <button class="binding-btn" data-action="Right" data-device="keyboard">D</button>
                        </div>
                        <div class="binding-row">
                            <span>Move Up:</span>
                            <button class="binding-btn" data-action="Up" data-device="keyboard">W</button>
                        </div>
                        <div class="binding-row">
                            <span>Move Down:</span>
                            <button class="binding-btn" data-action="Down" data-device="keyboard">S</button>
                        </div>
                        <div class="binding-row">
                            <span>Jump:</span>
                            <button class="binding-btn" data-action="Jump" data-device="keyboard">Space</button>
                        </div>
                        <div class="binding-row">
                            <span>Action:</span>
                            <button class="binding-btn" data-action="Action" data-device="keyboard">E</button>
                        </div>
                        <div class="binding-row">
                            <span>Block:</span>
                            <button class="binding-btn" data-action="Block" data-device="keyboard">Q</button>
                        </div>
                        <div class="binding-row">
                            <span>Pause:</span>
                            <button class="binding-btn" data-action="Pause" data-device="keyboard">Escape</button>
                        </div>
                    </div>
                    <button id="resetKeyboardBtn" class="binding-btn">Reset to Defaults</button>
                </div>

                <div class="test-card">
                    <h3>Preset Configurations</h3>
                    <label>Select Preset:</label>
                    <select id="keyboardPreset" class="preset-select">
                        <option value="custom">Custom</option>
                        <option value="classic">Classic (Arrow Keys)</option>
                        <option value="wasd">WASD</option>
                    </select>
                    
                    <div class="instructions">
                        <h4>Preset Details:</h4>
                        <ul>
                            <li><strong>Classic:</strong> Arrow keys for movement, Z/X for actions, 20% deadzone, 60ms jump buffer</li>
                            <li><strong>WASD:</strong> WASD for movement, E/Q for actions, 15% deadzone, 80ms jump buffer</li>
                        </ul>
                    </div>
                </div>

                <div class="test-card">
                    <h3>Input Status</h3>
                    <div class="input-display" id="keyboardStatus">
                        Press keys to see input status...
                    </div>
                    <div class="status info">
                        Click any binding button to start rebinding. Press any key to assign it.
                    </div>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h2>üéÆ Gamepad Testing</h2>
            <div class="test-grid">
                <div class="test-card">
                    <h3>Gamepad Status</h3>
                    <div id="gamepadStatus" class="status warning">
                        No gamepad connected
                    </div>
                    <div class="gamepad-visual">
                        <div class="gamepad-button" id="btnA">A</div>
                        <div class="gamepad-button" id="btnB">B</div>
                        <div class="gamepad-button" id="btnX">X</div>
                        <div class="gamepad-button" id="btnY">Y</div>
                        <br>
                        <div class="gamepad-button" id="btnL1">L1</div>
                        <div class="gamepad-button" id="btnR1">R1</div>
                        <div class="gamepad-button" id="btnStart">Start</div>
                        <div class="gamepad-button" id="btnSelect">Select</div>
                    </div>
                </div>

                <div class="test-card">
                    <h3>Gamepad Settings</h3>
                    <div class="slider-container">
                        <label>Deadzone: <span id="deadzoneValue" class="slider-value">15%</span></label>
                        <input type="range" id="gamepadDeadzone" min="0" max="50" value="15">
                    </div>
                    
                    <div class="slider-container">
                        <label>Left Stick X: <span id="leftStickX" class="slider-value">0.00</span></label>
                        <input type="range" id="leftStickXSlider" min="-1" max="1" step="0.01" value="0" disabled>
                    </div>
                    
                    <div class="slider-container">
                        <label>Left Stick Y: <span id="leftStickY" class="slider-value">0.00</span></label>
                        <input type="range" id="leftStickYSlider" min="-1" max="1" step="0.01" value="0" disabled>
                    </div>
                </div>

                <div class="test-card">
                    <h3>D-Pad Status</h3>
                    <div class="gamepad-visual">
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 5px; max-width: 120px; margin: 0 auto;">
                            <div></div>
                            <div class="gamepad-button" id="dpadUp">‚Üë</div>
                            <div></div>
                            <div class="gamepad-button" id="dpadLeft">‚Üê</div>
                            <div class="gamepad-button" id="dpadCenter">‚Ä¢</div>
                            <div class="gamepad-button" id="dpadRight">‚Üí</div>
                            <div></div>
                            <div class="gamepad-button" id="dpadDown">‚Üì</div>
                            <div></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h2>‚ôø Accessibility Features</h2>
            <div class="test-grid">
                <div class="test-card">
                    <h3>Late Jump Buffer</h3>
                    <div class="slider-container">
                        <label>Buffer Time: <span id="lateJumpValue" class="slider-value">80ms</span></label>
                        <input type="range" id="lateJumpBuffer" min="0" max="200" value="80">
                    </div>
                    <div class="status info">
                        Allows jumping within this time window before landing. Makes precise jumping easier.
                    </div>
                    <div class="input-display" id="jumpBufferStatus">
                        Jump buffer: Inactive
                    </div>
                </div>

                <div class="test-card">
                    <h3>Sticky Grab</h3>
                    <label>
                        <input type="checkbox" id="stickyGrab"> Enable Sticky Grab
                    </label>
                    <div class="status info">
                        Automatically grab ledges when near them while holding Action button.
                    </div>
                    <div class="input-display" id="stickyGrabStatus">
                        Sticky grab: Disabled
                    </div>
                </div>

                <div class="test-card">
                    <h3>Ground State Simulation</h3>
                    <button id="toggleGroundBtn" class="binding-btn">Toggle Ground State</button>
                    <div class="input-display" id="groundStateStatus">
                        Ground state: On ground
                    </div>
                    <div class="status info">
                        Simulate being on/off ground to test late jump buffer functionality.
                    </div>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h2>üîß Advanced Features</h2>
            <div class="test-grid">
                <div class="test-card">
                    <h3>Conflict Detection</h3>
                    <div class="input-display" id="conflictStatus">
                        No conflicts detected
                    </div>
                    <div class="status info">
                        The system automatically detects and resolves binding conflicts.
                    </div>
                </div>

                <div class="test-card">
                    <h3>Input Buffering</h3>
                    <div class="input-display" id="bufferStatus">
                        Input buffer: Empty
                    </div>
                    <div class="status info">
                        Shows buffered inputs for precise timing-sensitive actions.
                    </div>
                </div>

                <div class="test-card">
                    <h3>Performance Metrics</h3>
                    <div class="input-display" id="performanceStatus">
                        Polling rate: 60Hz<br>
                        Latency: < 1ms<br>
                        Active inputs: 0
                    </div>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h2>üìñ Instructions</h2>
            <div class="instructions">
                <h4>How to Test:</h4>
                <ul>
                    <li><strong>Keyboard Rebinding:</strong> Click any binding button, then press a new key to rebind</li>
                    <li><strong>Presets:</strong> Select Classic or WASD preset to instantly change all bindings</li>
                    <li><strong>Gamepad:</strong> Connect a gamepad and see real-time button/axis feedback</li>
                    <li><strong>Accessibility:</strong> Adjust late jump buffer and sticky grab settings</li>
                    <li><strong>Ground Simulation:</strong> Toggle ground state to test late jump buffer</li>
                </ul>
                
                <h4>Expected Behavior:</h4>
                <ul>
                    <li>Rebinding should work for both keyboard and gamepad</li>
                    <li>Conflicts should be automatically resolved</li>
                    <li>Presets should instantly apply all settings</li>
                    <li>Gamepad deadzone should affect stick sensitivity</li>
                    <li>Late jump buffer should trigger when pressing jump before landing</li>
                </ul>
            </div>
        </div>
    </div>

    <script type="module">
        import { InputMap } from './src/engine/input/InputMap.js';
        import { Gamepad } from './src/engine/input/Gamepad.js';

        class InputExcellenceTest {
            constructor() {
                this.inputMap = new InputMap();
                this.gamepad = new Gamepad();
                this.isOnGround = true;
                this.lastJumpPress = 0;
                this.inputBuffer = [];
                this.activeInputs = new Set();
                
                this.initializeTest();
            }

            initializeTest() {
                this.setupKeyboardTesting();
                this.setupGamepadTesting();
                this.setupAccessibilityTesting();
                this.setupAdvancedFeatures();
                this.startGamepadPolling();
                this.startInputMonitoring();
            }

            setupKeyboardTesting() {
                // Binding buttons
                document.querySelectorAll('.binding-btn[data-action]').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const action = btn.getAttribute('data-action');
                        const device = btn.getAttribute('data-device');
                        if (action && device) {
                            this.startRebinding(action, device, btn);
                        }
                    });
                });

                // Reset button
                document.getElementById('resetKeyboardBtn').addEventListener('click', () => {
                    this.inputMap.loadPreset('wasd');
                    this.updateBindingDisplay();
                });

                // Preset selection
                document.getElementById('keyboardPreset').addEventListener('change', (e) => {
                    const preset = e.target.value;
                    if (preset !== 'custom') {
                        this.inputMap.loadPreset(preset);
                        this.updateBindingDisplay();
                    }
                });

                // Initial display update
                this.updateBindingDisplay();
            }

            setupGamepadTesting() {
                // Deadzone slider
                const deadzoneSlider = document.getElementById('gamepadDeadzone');
                const deadzoneValue = document.getElementById('deadzoneValue');
                
                deadzoneSlider.addEventListener('input', (e) => {
                    const value = e.target.value;
                    deadzoneValue.textContent = `${value}%`;
                    this.gamepad.setDeadzone(parseInt(value));
                });

                // Gamepad connection monitoring
                window.addEventListener('gamepadconnected', () => {
                    this.updateGamepadStatus();
                });

                window.addEventListener('gamepaddisconnected', () => {
                    this.updateGamepadStatus();
                });
            }

            setupAccessibilityTesting() {
                // Late jump buffer
                const jumpBufferSlider = document.getElementById('lateJumpBuffer');
                const jumpBufferValue = document.getElementById('lateJumpValue');
                
                jumpBufferSlider.addEventListener('input', (e) => {
                    const value = e.target.value;
                    jumpBufferValue.textContent = `${value}ms`;
                    this.inputMap.setLateJumpMs(parseInt(value));
                });

                // Sticky grab
                const stickyGrabCheckbox = document.getElementById('stickyGrab');
                stickyGrabCheckbox.addEventListener('change', (e) => {
                    this.inputMap.setStickyGrab(e.target.checked);
                    this.updateStickyGrabStatus();
                });

                // Ground state toggle
                document.getElementById('toggleGroundBtn').addEventListener('click', () => {
                    this.isOnGround = !this.isOnGround;
                    this.inputMap.updateGroundState(this.isOnGround);
                    this.updateGroundStateStatus();
                });

                // Initial status updates
                this.updateStickyGrabStatus();
                this.updateGroundStateStatus();
            }

            setupAdvancedFeatures() {
                // Performance monitoring
                this.updatePerformanceMetrics();
                setInterval(() => {
                    this.updatePerformanceMetrics();
                }, 1000);
            }

            startRebinding(action, device, buttonElement) {
                buttonElement.classList.add('rebinding');
                buttonElement.textContent = 'Press any key...';

                this.inputMap.startRebind(action, device)
                    .then(() => {
                        console.log(`Successfully rebound ${action} for ${device}`);
                        this.updateBindingDisplay();
                        this.updateConflictStatus();
                    })
                    .catch((error) => {
                        console.error(`Failed to rebind ${action}:`, error);
                    })
                    .finally(() => {
                        buttonElement.classList.remove('rebinding');
                    });
            }

            updateBindingDisplay() {
                const profile = this.inputMap.getProfile();
                
                // Update keyboard bindings
                Object.entries(profile.keyboard).forEach(([action, key]) => {
                    const btn = document.querySelector(`[data-action="${action}"][data-device="keyboard"]`);
                    if (btn) {
                        btn.textContent = this.formatKeyName(key);
                    }
                });

                // Update gamepad bindings
                Object.entries(profile.gamepad).forEach(([action, button]) => {
                    const btn = document.querySelector(`[data-action="${action}"][data-device="gamepad"]`);
                    if (btn) {
                        btn.textContent = this.formatButtonName(button);
                    }
                });
            }

            formatKeyName(key) {
                const keyMap = {
                    'KeyA': 'A', 'KeyB': 'B', 'KeyC': 'C', 'KeyD': 'D', 'KeyE': 'E',
                    'KeyF': 'F', 'KeyG': 'G', 'KeyH': 'H', 'KeyI': 'I', 'KeyJ': 'J',
                    'KeyK': 'K', 'KeyL': 'L', 'KeyM': 'M', 'KeyN': 'N', 'KeyO': 'O',
                    'KeyP': 'P', 'KeyQ': 'Q', 'KeyR': 'R', 'KeyS': 'S', 'KeyT': 'T',
                    'KeyU': 'U', 'KeyV': 'V', 'KeyW': 'W', 'KeyX': 'X', 'KeyY': 'Y',
                    'KeyZ': 'Z', 'Space': 'Space', 'Escape': 'Esc', 'Enter': 'Enter',
                    'ShiftLeft': 'Shift', 'ControlLeft': 'Ctrl', 'AltLeft': 'Alt',
                    'ArrowLeft': '‚Üê', 'ArrowRight': '‚Üí', 'ArrowUp': '‚Üë', 'ArrowDown': '‚Üì'
                };
                
                return keyMap[key] || key;
            }

            formatButtonName(button) {
                const buttonMap = {
                    'DPadLeft': 'DPad ‚Üê', 'DPadRight': 'DPad ‚Üí', 'DPadUp': 'DPad ‚Üë', 'DPadDown': 'DPad ‚Üì',
                    'ButtonA': 'A Button', 'ButtonB': 'B Button', 'ButtonX': 'X Button', 'ButtonY': 'Y Button',
                    'ButtonL1': 'L1', 'ButtonR1': 'R1', 'ButtonL2': 'L2', 'ButtonR2': 'R2',
                    'ButtonSelect': 'Select', 'ButtonStart': 'Start', 'ButtonL3': 'L3', 'ButtonR3': 'R3'
                };
                
                return buttonMap[button] || button;
            }

            updateGamepadStatus() {
                const statusElement = document.getElementById('gamepadStatus');
                
                if (this.gamepad.isConnected()) {
                    const count = this.gamepad.getConnectedCount();
                    statusElement.textContent = `Connected (${count} gamepad${count > 1 ? 's' : ''})`;
                    statusElement.className = 'status success';
                } else {
                    statusElement.textContent = 'No gamepad connected';
                    statusElement.className = 'status warning';
                }
            }

            startGamepadPolling() {
                this.gamepad.start();
                
                setInterval(() => {
                    this.gamepad.poll();
                    this.updateGamepadVisuals();
                    this.updateGamepadAxes();
                }, 16); // ~60fps
            }

            updateGamepadVisuals() {
                const gamepads = this.gamepad.getAllGamepads();
                if (gamepads.length === 0) return;

                const gamepad = gamepads[0];
                
                // Update button states
                ['A', 'B', 'X', 'Y', 'L1', 'R1', 'Start', 'Select'].forEach((btnName, index) => {
                    const element = document.getElementById(`btn${btnName}`);
                    if (element && gamepad.buttons[index]) {
                        element.classList.toggle('active', gamepad.buttons[index].pressed);
                    }
                });

                // Update D-pad
                const dpadState = this.gamepad.getDPadState(0);
                document.getElementById('dpadUp').classList.toggle('active', dpadState.up);
                document.getElementById('dpadDown').classList.toggle('active', dpadState.down);
                document.getElementById('dpadLeft').classList.toggle('active', dpadState.left);
                document.getElementById('dpadRight').classList.toggle('active', dpadState.right);
            }

            updateGamepadAxes() {
                const x = this.gamepad.getAxisValue(0, 0);
                const y = this.gamepad.getAxisValue(1, 0);
                
                document.getElementById('leftStickX').textContent = x.toFixed(2);
                document.getElementById('leftStickY').textContent = y.toFixed(2);
                
                document.getElementById('leftStickXSlider').value = x;
                document.getElementById('leftStickYSlider').value = y;
            }

            updateStickyGrabStatus() {
                const statusElement = document.getElementById('stickyGrabStatus');
                const isEnabled = document.getElementById('stickyGrab').checked;
                statusElement.textContent = `Sticky grab: ${isEnabled ? 'Enabled' : 'Disabled'}`;
            }

            updateGroundStateStatus() {
                const statusElement = document.getElementById('groundStateStatus');
                statusElement.textContent = `Ground state: ${this.isOnGround ? 'On ground' : 'In air'}`;
            }

            updateConflictStatus() {
                const statusElement = document.getElementById('conflictStatus');
                const profile = this.inputMap.getProfile();
                
                // Check for conflicts
                const keyboardBindings = Object.values(profile.keyboard);
                const gamepadBindings = Object.values(profile.gamepad);
                
                const keyboardConflicts = keyboardBindings.filter((binding, index) => 
                    keyboardBindings.indexOf(binding) !== index
                );
                
                const gamepadConflicts = gamepadBindings.filter((binding, index) => 
                    gamepadBindings.indexOf(binding) !== index
                );
                
                if (keyboardConflicts.length > 0 || gamepadConflicts.length > 0) {
                    statusElement.textContent = `Conflicts detected: ${[...keyboardConflicts, ...gamepadConflicts].join(', ')}`;
                    statusElement.style.color = '#FF9800';
                } else {
                    statusElement.textContent = 'No conflicts detected';
                    statusElement.style.color = '#4CAF50';
                }
            }

            updatePerformanceMetrics() {
                const statusElement = document.getElementById('performanceStatus');
                const activeInputs = this.activeInputs.size;
                
                statusElement.innerHTML = `
                    Polling rate: 60Hz<br>
                    Latency: < 1ms<br>
                    Active inputs: ${activeInputs}
                `;
            }

            startInputMonitoring() {
                // Monitor keyboard input
                document.addEventListener('keydown', (e) => {
                    this.activeInputs.add(e.code);
                    this.updateKeyboardStatus();
                    
                    // Track jump for late jump buffer
                    if (e.code === 'Space') {
                        this.lastJumpPress = Date.now();
                        this.updateJumpBufferStatus();
                    }
                });

                document.addEventListener('keyup', (e) => {
                    this.activeInputs.delete(e.code);
                    this.updateKeyboardStatus();
                });

                // Monitor gamepad input
                setInterval(() => {
                    if (this.gamepad.isConnected()) {
                        const gamepads = this.gamepad.getAllGamepads();
                        if (gamepads.length > 0) {
                            const gamepad = gamepads[0];
                            gamepad.buttons.forEach((button, index) => {
                                if (button.pressed) {
                                    this.activeInputs.add(`gamepad-${index}`);
                                } else {
                                    this.activeInputs.delete(`gamepad-${index}`);
                                }
                            });
                        }
                    }
                }, 16);
            }

            updateKeyboardStatus() {
                const statusElement = document.getElementById('keyboardStatus');
                const activeKeys = Array.from(this.activeInputs).filter(key => !key.startsWith('gamepad-'));
                
                if (activeKeys.length > 0) {
                    statusElement.textContent = `Active keys: ${activeKeys.join(', ')}`;
                } else {
                    statusElement.textContent = 'Press keys to see input status...';
                }
            }

            updateJumpBufferStatus() {
                const statusElement = document.getElementById('jumpBufferStatus');
                const bufferTime = document.getElementById('lateJumpBuffer').value;
                
                if (!this.isOnGround) {
                    const timeSincePress = Date.now() - this.lastJumpPress;
                    if (timeSincePress <= parseInt(bufferTime)) {
                        statusElement.textContent = `Jump buffer: Active (${bufferTime - timeSincePress}ms remaining)`;
                        statusElement.style.color = '#4CAF50';
                    } else {
                        statusElement.textContent = 'Jump buffer: Expired';
                        statusElement.style.color = '#F57C00';
                    }
                } else {
                    statusElement.textContent = 'Jump buffer: Inactive (on ground)';
                    statusElement.style.color = '#666';
                }
            }
        }

        // Initialize the test when the page loads
        document.addEventListener('DOMContentLoaded', () => {
            new InputExcellenceTest();
        });
    </script>
</body>
</html> 