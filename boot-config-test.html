<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>URL Boot Config Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f0f0f0;
        }
        .test-section {
            background: white;
            margin: 20px 0;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .test-link {
            display: inline-block;
            margin: 10px;
            padding: 10px 15px;
            background: #007bff;
            color: white;
            text-decoration: none;
            border-radius: 4px;
            font-size: 14px;
        }
        .test-link:hover {
            background: #0056b3;
        }
        .description {
            color: #666;
            font-size: 14px;
            margin-bottom: 10px;
        }
        h1 {
            color: #333;
            text-align: center;
        }
        h2 {
            color: #555;
            border-bottom: 2px solid #007bff;
            padding-bottom: 5px;
        }
        .url-display {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 4px;
            font-family: monospace;
            font-size: 12px;
            word-break: break-all;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <h1>URL Boot Config Test</h1>
    
    <div class="test-section">
        <h2>Basic Game State</h2>
        <div class="description">Test basic game state parameters like level, health, and position.</div>
        
        <a href="index.html?level=3&health=50&x=100&y=200" class="test-link">Level 3, Health 50, Position (100,200)</a>
        <a href="index.html?level=7&health=25&time=300" class="test-link">Level 7, Health 25, Time 300</a>
        <a href="index.html?level=1&health=100&sword=1" class="test-link">Level 1, Full Health, Sword</a>
    </div>

    <div class="test-section">
        <h2>Cheats & Debug</h2>
        <div class="description">Test various cheat codes and debug features.</div>
        
        <a href="index.html?noclip=1&god=1" class="test-link">NoClip + God Mode</a>
        <a href="index.html?infTime=1&givesword=1" class="test-link">Infinite Time + Give Sword</a>
        <a href="index.html?noclip=1&god=1&infTime=1&reveal=1" class="test-link">All Cheats Enabled</a>
        <a href="index.html?setguards=5" class="test-link">Set Guards to 5</a>
    </div>

    <div class="test-section">
        <h2>Video & Audio Settings</h2>
        <div class="description">Test video and audio configuration parameters.</div>
        
        <a href="index.html?scale=fit&fps=120&fullscreen=1" class="test-link">Fit Scale, 120 FPS, Fullscreen</a>
        <a href="index.html?scale=stretch&zoom=2.0" class="test-link">Stretch Scale, 2x Zoom</a>
        <a href="index.html?mute=1&music=0&sfx=1" class="test-link">Muted, No Music, SFX On</a>
        <a href="index.html?vol=0.5&latency=low" class="test-link">50% Volume, Low Latency</a>
    </div>

    <div class="test-section">
        <h2>Input & Accessibility</h2>
        <div class="description">Test input and accessibility settings.</div>
        
        <a href="index.html?deadzone=0.2&jumpbuf=100&sticky=1" class="test-link">Deadzone 20%, Jump Buffer 100ms, Sticky</a>
        <a href="index.html?hud=0&cutscenes=0" class="test-link">No HUD, Skip Cutscenes</a>
        <a href="index.html?lang=es" class="test-link">Spanish Language</a>
    </div>

    <div class="test-section">
        <h2>Save Slots</h2>
        <div class="description">Test loading from different save slots.</div>
        
        <a href="index.html?slot=1" class="test-link">Load Save Slot 1</a>
        <a href="index.html?slot=2" class="test-link">Load Save Slot 2</a>
        <a href="index.html?slot=3" class="test-link">Load Save Slot 3</a>
        <a href="index.html?slot=Q" class="test-link">Quick Save Slot</a>
    </div>

    <div class="test-section">
        <h2>Performance & Advanced</h2>
        <div class="description">Test performance and advanced configuration options.</div>
        
        <a href="index.html?speed=2.0&vsync=0" class="test-link">2x Speed, No VSync</a>
        <a href="index.html?seed=12345&difficulty=hard" class="test-link">Seed 12345, Hard Difficulty</a>
        <a href="index.html?editor=1" class="test-link">Editor Mode</a>
    </div>

    <div class="test-section">
        <h2>Complex Combinations</h2>
        <div class="description">Test complex parameter combinations that might be used in real scenarios.</div>
        
        <a href="index.html?pack=snes&level=3&health=75&time=180&noclip=1&god=1&music=0&scale=integer&fps=60&jumpbuf=80" class="test-link">Speedrun Setup</a>
        <a href="index.html?packUrl=https://example.com/game.ptspack&editor=1" class="test-link">External Pack + Editor</a>
        <a href="index.html?slot=2&mute=1&hud=0&cutscenes=0" class="test-link">Silent Playthrough</a>
    </div>

    <div class="test-section">
        <h2>Current URL Analysis</h2>
        <div class="description">Display and analyze the current URL parameters.</div>
        
        <div class="url-display" id="currentUrl"></div>
        <div id="urlAnalysis"></div>
        
        <script>
            function analyzeCurrentUrl() {
                const url = window.location.href;
                const urlDisplay = document.getElementById('currentUrl');
                const analysis = document.getElementById('urlAnalysis');
                
                urlDisplay.textContent = url;
                
                const params = new URLSearchParams(window.location.search);
                if (params.toString()) {
                    let analysisText = '<h3>Parameters Found:</h3><ul>';
                    for (const [key, value] of params) {
                        analysisText += `<li><strong>${key}:</strong> ${value}</li>`;
                    }
                    analysisText += '</ul>';
                    analysis.innerHTML = analysisText;
                } else {
                    analysis.innerHTML = '<p>No URL parameters found. This is the default boot configuration.</p>';
                }
            }
            
            // Analyze URL on page load
            analyzeCurrentUrl();
            
            // Add click handlers to show URL before navigation
            document.querySelectorAll('.test-link').forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const url = link.href;
                    if (confirm(`Navigate to:\n${url}\n\nThis will test the URL boot configuration system.`)) {
                        window.location.href = url;
                    }
                });
            });
        </script>
    </div>

    <div class="test-section">
        <h2>Implementation Notes</h2>
        <div class="description">
            <p><strong>URL Boot Config System Features:</strong></p>
            <ul>
                <li><strong>30+ Parameters:</strong> Support for pack, level, health, cheats, video/audio/input settings</li>
                <li><strong>Precedence:</strong> Engine defaults → Pack defaults → SettingsStore → URL (wins for session)</li>
                <li><strong>Default Boot:</strong> Level 1 by default, skipping cutscenes, muted until input</li>
                <li><strong>Validation:</strong> Parameter validation with warnings for invalid values</li>
                <li><strong>Copy Boot Link:</strong> π menu button to copy current non-default settings as URL</li>
            </ul>
            
            <p><strong>Key Parameters:</strong></p>
            <ul>
                <li><code>pack</code> - Built-in pack name</li>
                <li><code>packUrl</code> - External pack URL</li>
                <li><code>level</code> - Starting level (default: 1)</li>
                <li><code>health</code> - Player health</li>
                <li><code>noclip</code>, <code>god</code>, <code>infTime</code> - Cheat codes</li>
                <li><code>scale</code> - Display scaling (integer/fit/stretch)</li>
                <li><code>mute</code>, <code>vol</code> - Audio settings</li>
                <li><code>slot</code> - Save slot to load (1/2/3/Q)</li>
            </ul>
        </div>
    </div>
</body>
</html> 